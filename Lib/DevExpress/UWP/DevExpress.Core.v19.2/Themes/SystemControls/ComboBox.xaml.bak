<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dx="using:DevExpress.Core">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="ms-appx:///DevExpress.Core.v19.2/Themes/SystemControls/ComboBox.Colors.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <ControlTemplate x:Key="DXComboBoxTemplate" TargetType="ComboBox">
        <Grid x:Name="PART_Root" BorderBrush="Transparent" Background="Transparent">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="auto" />
            </Grid.ColumnDefinitions>
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="PointerOver">
                        <VisualState.Setters>
                            <Setter Target="Background.Background" Value="{ThemeResource ComboBoxBackgroundHoverBrush}"/>
                            <Setter Target="Background.BorderBrush" Value="{ThemeResource ComboBoxBorderHoverBrush}"/>
                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource ComboBoxForegroundHoverBrush}"/>
                            <Setter Target="DropDownGlyph.Foreground" Value="{ThemeResource ComboBoxGlyphForegroundHoverBrush}"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="Pressed">
                        <VisualState.Setters>
                            <Setter Target="Background.Background" Value="{ThemeResource ComboBoxBackgroundPressedBrush}"/>
                            <Setter Target="Background.BorderBrush" Value="{ThemeResource ComboBoxBorderPressedBrush}"/>
                            <Setter Target="DropDownGlyphContainer.Background" Value="{ThemeResource ComboBoxGlyphBackgroundPressedBrush}"/>
                            <Setter Target="DropDownGlyph.Foreground" Value="{ThemeResource ComboBoxGlyphForegroundPressedBrush}"/>
                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource ComboBoxForegroundPressedBrush}"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Target="Background.Background" Value="{ThemeResource ComboBoxBackgroundDisabledBrush}"/>
                            <Setter Target="Background.BorderBrush" Value="{ThemeResource ComboBoxBorderDisabledBrush}"/>
                            <Setter Target="DropDownGlyph.Foreground" Value="{ThemeResource ComboBoxGlyphForegroundDisabledBrush}"/>
                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource ComboBoxForegroundDisabledBrush}"/>
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
                <VisualStateGroup x:Name="FocusStates">
                    <VisualState x:Name="Focused">
                        <VisualState.Setters>
                            <Setter Target="PART_Root.BorderBrush" Value="{ThemeResource ComboBoxOuterFocusVisualStroke}"/>
                            <Setter Target="FocusRectangle.Opacity" Value="1"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="FocusedPressed" >
                        <VisualState.Setters>
                            <Setter Target="PART_Root.BorderBrush" Value="{ThemeResource ComboBoxOuterFocusVisualStrokePressed}"/>
                            <Setter Target="FocusRectangle.Opacity" Value="1"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="Unfocused" />
                    <VisualState x:Name="PointerFocused" />
                    <VisualState x:Name="FocusedDropDown"/>
                </VisualStateGroup>
                <VisualStateGroup x:Name="DropDownStates">
                    <VisualState x:Name="Opened">
                        <Storyboard>
                            <SplitOpenThemeAnimation
                                            OpenedTargetName="PopupBorder"
                                            ClosedTargetName="ContentPresenter"
                                            OffsetFromCenter="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.DropDownOffset}"
                                            OpenedLength="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.DropDownOpenedHeight}"/>
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Closed">
                        <Storyboard>
                            <SplitCloseThemeAnimation
                                            OpenedTargetName="PopupBorder"
                                            ClosedTargetName="ContentPresenter"
                                            OffsetFromCenter="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.DropDownOffset}"
                                            OpenedLength="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.DropDownOpenedHeight}"/>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <ContentPresenter x:Name="HeaderContentPresenter"
                              x:DeferLoadStrategy="Lazy"
                              Margin="{ThemeResource ComboBoxHeaderThemeMargin}"
                              Foreground="{ThemeResource ComboBoxForegroundBrush}"
                              FlowDirection="{TemplateBinding FlowDirection}"
                              FontWeight="{ThemeResource ComboBoxHeaderThemeFontWeight}"
                              Visibility="Collapsed"
                              Content="{TemplateBinding Header}"
                              ContentTemplate="{TemplateBinding HeaderTemplate}" />
            <Border x:Name="Background"
                            Grid.Row="1"
                            Grid.ColumnSpan="2"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}" />
            <Rectangle x:Name="FocusRectangle"
                            Grid.Row="1"
                            Grid.ColumnSpan="2"
                            Opacity="0"
                            Stroke="{ThemeResource ComboBoxInnerFocusVisualStroke}"
                            Fill="{x:Null}"
                            StrokeThickness="{TemplateBinding BorderThickness}" />
            <Border x:Name="HighlightBackground"
                            Grid.Row="1"
                            Grid.ColumnSpan="2" 
                            Background="Transparent"
                            BorderBrush="{ThemeResource ComboBoxHighlightBorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Opacity="0" />
            <ContentPresenter x:Name="ContentPresenter"
                              Grid.Row="1"
                              Foreground="{TemplateBinding Foreground}"
                              Margin="{TemplateBinding Padding}"
                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                <TextBlock x:Name="PlaceholderTextBlock"
                                Text="{TemplateBinding PlaceholderText}"
                                Foreground="{ThemeResource ComboBoxForegroundBrush}"
                                FontWeight="{ThemeResource ComboBoxPlaceholderTextThemeFontWeight}"/>
            </ContentPresenter>
            <Grid x:Name="DropDownGlyphContainer" Grid.Row="1" Grid.Column="1"
                  BorderThickness="1"
                  BorderBrush="Transparent">
                <FontIcon x:Name="DropDownGlyph"                          
                                IsHitTestVisible="False"                          
                                Margin="5"
                                Foreground="{ThemeResource ComboBoxGlyphForegroundBrush}"
                                FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                FontSize="12"
                                FontWeight="ExtraBold"
                                Glyph="&#xE0E5;"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                AutomationProperties.AccessibilityView="Raw" />
            </Grid>
            <Popup x:Name="Popup">
                <Border x:Name="PopupBorder"
                        BorderBrush="{ThemeResource ComboBoxItemsBorderBrush}"
                        BorderThickness="1"
                        Background="{ThemeResource ComboBoxItemsBackgroundBrush}"
                        HorizontalAlignment="Stretch">
                    <ScrollViewer x:Name="ScrollViewer"
                                    MinWidth="{ThemeResource ComboBoxPopupThemeMinWidth}"
                                    VerticalSnapPointsType="OptionalSingle"
                                    VerticalSnapPointsAlignment="Near"
                                    HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}"
                                    HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
                                    VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}"
                                    VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}"
                                    IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}"
                                    IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}"
                                    IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}"
                                    BringIntoViewOnFocusChange="{TemplateBinding ScrollViewer.BringIntoViewOnFocusChange}"
                                    ZoomMode="Disabled"
                                    AutomationProperties.AccessibilityView="Raw">
                        <ItemsPresenter />
                    </ScrollViewer>
                </Border>
            </Popup>
        </Grid>
    </ControlTemplate>

    <Style TargetType="ComboBox" x:Key="SystemComboBoxStyle">
        <Setter Property="BorderBrush" Value="{ThemeResource ComboBoxBorderBrush}"/>
        <Setter Property="Background" Value="{ThemeResource ComboBoxBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{ThemeResource ComboBoxForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="4,2"/>
        <Setter Property="Template" Value="{StaticResource DXComboBoxTemplate}"/>
    </Style>

    <Style TargetType="ComboBox" BasedOn="{StaticResource SystemComboBoxStyle}"/>

    <ControlTemplate x:Key="DXComboBoxItemTemplate" TargetType="ComboBoxItem">
        <Grid x:Name="LayoutRoot"
              Background="{TemplateBinding Background}"
              BorderBrush="{TemplateBinding BorderBrush}"
              BorderThickness="1">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal"/>
                    <VisualState x:Name="PointerOver">
                        <VisualState.Setters>
                            <Setter Target="LayoutRoot.Background" Value="{ThemeResource ComboBoxItemBackgroundHoveredBrush}"/>
                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource ComboBoxItemForegroundHoveredBrush}"/>
                        </VisualState.Setters>
                        <Storyboard>
                            <PointerUpThemeAnimation Storyboard.TargetName="LayoutRoot" />
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Target="LayoutRoot.Background" Value="{ThemeResource ComboBoxItemBackgroundDisabledBrush}"/>
                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource ComboBoxItemForegroundDisabledBrush}"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="Pressed">
                        <VisualState.Setters>
                            <Setter Target="LayoutRoot.Background" Value="{ThemeResource ComboBoxItemBackgroundPressedBrush}"/>
                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource ComboBoxItemForegroundPressedBrush}"/>
                        </VisualState.Setters>
                        <Storyboard>
                            <PointerDownThemeAnimation Storyboard.TargetName="LayoutRoot" />
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Selected">
                        <VisualState.Setters>
                            <Setter Target="LayoutRoot.Background" Value="{ThemeResource ComboBoxItemBackgroundSelectedBrush}"/>
                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource ComboBoxItemForegroundSelectedBrush}"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="SelectedUnfocused">
                        <VisualState.Setters>
                            <Setter Target="LayoutRoot.Background" Value="{ThemeResource ComboBoxItemBackgroundSelectedUnfocusedBrush}"/>
                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource ComboBoxItemForegroundSelectedUnfocusedBrush}"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="SelectedDisabled">
                        <VisualState.Setters>
                            <Setter Target="LayoutRoot.Background" Value="{ThemeResource ComboBoxItemBackgroundSelectedDisabledBrush}"/>
                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource ComboBoxItemForegroundSelectedDisabledBrush}"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="SelectedPointerOver">
                        <VisualState.Setters>
                            <Setter Target="LayoutRoot.Background" Value="{ThemeResource ComboBoxItemBackgroundSelectedHoveredBrush}"/>
                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource ComboBoxItemForegroundSelectedHoveredBrush}"/>
                        </VisualState.Setters>
                        <Storyboard>
                            <PointerUpThemeAnimation Storyboard.TargetName="LayoutRoot" />
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="SelectedPressed">
                        <VisualState.Setters>
                            <Setter Target="LayoutRoot.Background" Value="{ThemeResource ComboBoxItemBackgroundSelectedPressedBrush}"/>
                            <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource ComboBoxItemForegroundSelectedPressedBrush}"/>
                        </VisualState.Setters>
                        <Storyboard>
                            <PointerDownThemeAnimation Storyboard.TargetName="LayoutRoot" />
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
                <VisualStateGroup x:Name="FocusStates">
                    <VisualState x:Name="Focused">
                        <VisualState.Setters>
                            <Setter Target="LayoutRoot.BorderBrush" Value="{ThemeResource ComboBoxItemOuterFocusVisualStroke}"/>
                        </VisualState.Setters>
                    </VisualState>
                    <VisualState x:Name="Unfocused" />
                    <VisualState x:Name="PointerFocused"/>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <ContentPresenter x:Name="ContentPresenter"
                              Content="{TemplateBinding Content}"
                              ContentTransitions="{TemplateBinding ContentTransitions}"
                              ContentTemplate="{TemplateBinding ContentTemplate}"
                              Foreground="{TemplateBinding Foreground}"
                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                              Margin="{TemplateBinding Padding}" />
        </Grid>
    </ControlTemplate>

    <Style TargetType="ComboBoxItem">
        <Setter Property="Background" Value="{ThemeResource ComboBoxItemBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{ThemeResource ComboBoxItemForegroundBrush}"/>
        <Setter Property="UseSystemFocusVisuals" Value="False"/>
        <Setter Property="Template" Value="{StaticResource DXComboBoxItemTemplate}"/>
    </Style>

</ResourceDictionary>

