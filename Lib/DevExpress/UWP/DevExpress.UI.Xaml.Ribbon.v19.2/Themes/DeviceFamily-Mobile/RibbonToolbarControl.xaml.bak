<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Xaml="using:DevExpress.UI.Xaml"
    xmlns:Core="using:DevExpress.Core"
    xmlns:XamlInternal="using:DevExpress.UI.Xaml.Internal"
    xmlns:Internal="using:DevExpress.UI.Xaml.Ribbon.Internal"
    xmlns:Interactivity="using:DevExpress.Mvvm.UI.Interactivity"
    xmlns:Ribbon="using:DevExpress.UI.Xaml.Ribbon">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="ms-appx:///DevExpress.UI.Xaml.Ribbon.v19.2/Themes/RibbonToolbarControl.Colors.xaml"/>
    </ResourceDictionary.MergedDictionaries>
    <Internal:RibbonStateToBoolConverter x:Key="RibbonStateToBoolConverter"/>
    <Internal:SizeToDoubleConverter x:Key="SizeToDoubleConverter" Multiplier="0.45" Property="Height"/>
    <Core:ObjectToVisibilityConverter x:Key="ObjectToVisibilityConverter"/>
    <Internal:ThicknessNegationConverter x:Key="ThicknessNegationConverter"/>

    <Style TargetType="Ribbon:RibbonToolbarControl">
        <Setter Property="VerticalAlignment" Value="Stretch"/>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="Background" Value="{ThemeResource RibbonToolbarMobileBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{ThemeResource RibbonToolbarMobileForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="FontSize" Value="16"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Ribbon:RibbonToolbarControl">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="RibbonStates">
                                <VisualState x:Name="Default">
                                    <VisualState.StateTriggers>
                                        <StateTrigger IsActive="{Binding State, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource RibbonStateToBoolConverter}, ConverterParameter=Normal|Minimized}"/>
                                    </VisualState.StateTriggers>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="PART_ToolbarContent" 
                                                         Storyboard.TargetProperty="Height" 
                                                         From="{Binding ActualSize, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource SizeToDoubleConverter}}" 
                                                         To="0" 
                                                         Duration="0:0:0.2" 
                                                         EnableDependentAnimation="True">
                                            <DoubleAnimation.EasingFunction>
                                                <ExponentialEase EasingMode="EaseOut" Exponent="4"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ToolbarContent" Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0:0:0.2" Value="Collapsed"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimation Storyboard.TargetName="PART_ToolbarContent" 
                                                         Storyboard.TargetProperty="Opacity" 
                                                         From="1" 
                                                         To="0" 
                                                         Duration="0:0:0.2" 
                                                         EnableDependentAnimation="True">
                                            <DoubleAnimation.EasingFunction>
                                                <ExponentialEase EasingMode="EaseOut" Exponent="4"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Hidden">
                                    <VisualState.StateTriggers>
                                        <StateTrigger IsActive="{Binding State, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource RibbonStateToBoolConverter}, ConverterParameter=Hidden}"/>
                                    </VisualState.StateTriggers>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="PART_ToolbarContent" 
                                                         Storyboard.TargetProperty="Height" 
                                                         From="{Binding ActualSize, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource SizeToDoubleConverter}}" 
                                                         To="0" 
                                                         Duration="0:0:0.2" 
                                                         EnableDependentAnimation="True">
                                            <DoubleAnimation.EasingFunction>
                                                <ExponentialEase EasingMode="EaseOut" Exponent="4"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                        <DoubleAnimation Storyboard.TargetName="PART_ToolbarContent" 
                                                         Storyboard.TargetProperty="Opacity" 
                                                         From="1" 
                                                         To="0" 
                                                         Duration="0:0:0.2" 
                                                         EnableDependentAnimation="True">
                                            <DoubleAnimation.EasingFunction>
                                                <ExponentialEase EasingMode="EaseOut" Exponent="4"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ToolbarContent" Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0:0:0.2" Value="Collapsed"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Footer">
                                    <VisualState.StateTriggers>
                                        <StateTrigger IsActive="{Binding State, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource RibbonStateToBoolConverter}, ConverterParameter=Footer}"/>
                                    </VisualState.StateTriggers>
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ToolbarContent" Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimation Storyboard.TargetName="PART_ToolbarContent" 
                                                         Storyboard.TargetProperty="Height" 
                                                         To="{Binding ActualSize, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource SizeToDoubleConverter}}" 
                                                         From="0" 
                                                         Duration="0:0:0.2" 
                                                         EnableDependentAnimation="True">
                                            <DoubleAnimation.EasingFunction>
                                                <ExponentialEase EasingMode="EaseOut" Exponent="4"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                        <DoubleAnimation Storyboard.TargetName="PART_ToolbarContent" 
                                                         Storyboard.TargetProperty="Opacity" 
                                                         To="1" 
                                                         From="0" 
                                                         Duration="0:0:0.2" 
                                                         EnableDependentAnimation="True">
                                            <DoubleAnimation.EasingFunction>
                                                <ExponentialEase EasingMode="EaseOut" Exponent="4"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                        
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <ContentPresenter Background="Transparent"/>
                        <Internal:RibbonToolbarHeaderControl Grid.Row="1"                                                              
                                                             EmbedFlyoutHeader="True"
                                                             Owner="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                        <Rectangle x:Name="PART_FlyoutPlaceholder"
                                   Grid.Row="2"/>
                        <Rectangle x:Name="PART_InputPanePlaceholder" 
                                   Grid.Row="2">
                            <Interactivity:Interaction.BehaviorsTemplate>
                                <DataTemplate>
                                    <ContentControl>
                                        <Internal:RibbonInputPaneBehavior OwnerState="{Binding State, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=TwoWay}"/>
                                    </ContentControl>
                                </DataTemplate>
                            </Interactivity:Interaction.BehaviorsTemplate>
                        </Rectangle>
                        <ScrollViewer x:Name="PART_ToolbarContent"
                                      Background="{ThemeResource RibbonToolbarMobileContentBackgroundBrush}"
                                      Height="{Binding ActualSize, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource SizeToDoubleConverter}}"
                                      Grid.Row="2" 
                                      VerticalScrollMode="Auto" 
                                      VerticalScrollBarVisibility="Hidden">
                            <StackPanel Orientation="Vertical">
                                <Internal:FlyoutItemsContentHost ItemsSource="{Binding HotItems, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                                 ColumnCount="{TemplateBinding HotItemsColumnsCount}"/>
                                <ItemsControl ItemsSource="{Binding Tabs, RelativeSource={RelativeSource Mode=TemplatedParent}}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Vertical"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                </ItemsControl>
                            </StackPanel>
                        </ScrollViewer>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="Ribbon:RibbonSplitButton" x:Key="ToolbarTabButtonStyle">
        <Setter Property="ActAsDropDown" Value="True"/>
        <Setter Property="Background" Value="{ThemeResource RibbonToolbarTabItemMobileBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{ThemeResource RibbonToolbarTabItemMobileForegroundBrush}"/>
        <Setter Property="BorderBrush" Value="{ThemeResource RibbonToolbarTabItemMobileBorderBrush}"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="Padding" Value="12"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Ribbon:RibbonSplitButton">
                    <Grid x:Name="PART_Background"
                          Background="{TemplateBinding Background}"
                          BorderThickness="{TemplateBinding BorderThickness}"
                          BorderBrush="{TemplateBinding BorderBrush}"
                          Padding="{TemplateBinding Padding}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="SelectionStates">
                                <VisualState x:Name="Unselected"/>
                                <VisualState x:Name="UnselectedPointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.BorderBrush" Value="{ThemeResource RibbonToolbarTabItemMobileBorderHoverBrush}"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonToolbarTabItemMobileBackgroundHoverBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="UnselectedPressed">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.BorderBrush" Value="{ThemeResource RibbonToolbarTabItemMobileBorderPressedBrush}"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonToolbarTabItemMobileBackgroundPressedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Selected">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.BorderBrush" Value="{ThemeResource RibbonToolbarTabItemMobileBorderSelectedBrush}"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonToolbarTabItemMobileBackgroundSelectedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="SelectedPointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.BorderBrush" Value="{ThemeResource RibbonToolbarTabItemMobileBorderSelectedHoverBrush}"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonToolbarTabItemMobileBackgroundSelectedHoverBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="SelectedPressed">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.BorderBrush" Value="{ThemeResource RibbonToolbarTabItemMobileBorderSelectedPressedBrush}"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonToolbarTabItemMobileBackgroundSelectedPressedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <ContentPresenter x:Name="PART_ButtonText"
                                          VerticalAlignment="Center"
                                          Visibility="{Binding Content, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource ObjectToVisibilityConverter}}"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"/>

                        <PathIcon x:Name="PART_FlyoutArrowGlyph"
                                  Grid.Column="1"
                                  Data="F1 M 0,0 L 6,6 L 0,12 L 2,12 L 8,6 L 2,0 z"
                                  Foreground="{TemplateBinding Foreground}"
                                  VerticalAlignment="Center"
                                  HorizontalAlignment="Right"/>
                        <XamlInternal:NestedMenuFlyoutControl x:Name="PART_Flyout"
                                                       CloseOnTargetClick="{TemplateBinding XamlInternal:MenuFlyoutControl.CloseOnTargetClick}"
                                                       Background="{ThemeResource RibbonToolbarTabItemMobileFlyoutBackgroundBrush}"
                                                       StaysOpen="True"
                                                       AnimationDuration="0:0:0.2"
                                                       x:DeferLoadStrategy="Lazy"
                                                       Content="{TemplateBinding FlyoutContent}"
                                                       Grid.ColumnSpan="2"
                                                       Margin="{Binding BorderThickness, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource ThicknessNegationConverter}}"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="Ribbon:RibbonToolbarTab">
        <Setter Property="Background" Value="{ThemeResource RibbonToolbarTabMobileBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{ThemeResource RibbonToolbarTabMobileForegroundBrush}"/>
        <Setter Property="BorderBrush" Value="{ThemeResource RibbonToolbarTabMobileBorderBrush}"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="Padding" Value="12"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Ribbon:RibbonToolbarTab">
                    <Ribbon:RibbonSplitButton Style="{StaticResource ToolbarTabButtonStyle}" 
                                              Content="{TemplateBinding Caption}">
                        <Ribbon:RibbonSplitButton.FlyoutContent>
                            <ScrollViewer VerticalScrollMode="Auto" VerticalScrollBarVisibility="Hidden" BorderBrush="{ThemeResource RibbonToolbarTabMobileFlyoutBorderBrush}">
                                <Internal:RibbonTabPanel ItemsSource="{Binding Groups, RelativeSource={RelativeSource Mode=TemplatedParent}}" 
                                                         Orientation="Vertical"/>
                            </ScrollViewer>
                        </Ribbon:RibbonSplitButton.FlyoutContent>
                    </Ribbon:RibbonSplitButton>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>

