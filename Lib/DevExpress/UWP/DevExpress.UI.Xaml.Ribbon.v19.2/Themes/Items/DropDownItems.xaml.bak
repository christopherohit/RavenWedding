<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Ribbon="using:DevExpress.UI.Xaml.Ribbon"
    xmlns:Core="using:DevExpress.Core"
    xmlns:Internal="using:DevExpress.UI.Xaml.Ribbon.Internal"
    xmlns:XamlInternal="using:DevExpress.UI.Xaml.Internal">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="ms-appx:///DevExpress.UI.Xaml.Ribbon.v19.2/Themes/Items/DropDownItems.Colors.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <Internal:ThicknessNegationConverter x:Key="ThicknessNegationConverter"/>
    <Core:ObjectToBooleanConverter x:Key="ObjectToBooleanConverter"/>

    <Style TargetType="Internal:RibbonHeaderDropDownItem">
        <Setter Property="UseSystemFocusVisuals" Value="False"/>
        <Setter Property="Background" Value="{ThemeResource RibbonHeaderDropDownItemBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{ThemeResource RibbonHeaderDropDownItemForegroundBrush}"/>
        <Setter Property="BorderBrush" Value="{ThemeResource RibbonHeaderDropDownItemBorderBrush}"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="Padding" Value="11"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="IconSource" Value="F1 M 0,0 L 6,4 L 12,0 L 12,2 L 6,6 L 0,2 z"/>
        <Setter Property="ClickMode" Value="Press"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Internal:RibbonHeaderDropDownItem">
                    <Grid x:Name="PART_Background"
                          CornerRadius="2,2,0,0"
                          Background="{TemplateBinding Background}"
                          BorderThickness="{TemplateBinding BorderThickness}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="Disabled">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.Opacity" Value="0.4"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="SelectionStates">
                                <VisualState x:Name="Unselected">
                                    <VisualState.Setters>
                                        <Setter Target="PART_UnselectedFocusVisual.Opacity" Value="1"/>
                                        <Setter Target="PART_SelectedFocusVisual.Opacity" Value="0"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="UnselectedPointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonHeaderDropDownItemBackgroundHoverBrush}"/>
                                        <Setter Target="PART_Icon.Foreground" Value="{ThemeResource RibbonHeaderDropDownItemForegroundHoverBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="UnselectedPressed">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonHeaderDropDownItemBackgroundPressedBrush}"/>
                                        <Setter Target="PART_Icon.Foreground" Value="{ThemeResource RibbonHeaderDropDownItemForegroundPressedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Selected">
                                    <VisualState.Setters>
                                        <Setter Target="PART_UnselectedFocusVisual.Opacity" Value="0"/>
                                        <Setter Target="PART_SelectedFocusVisual.Opacity" Value="1"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonHeaderDropDownItemBackgroundSelectedBrush}"/>
                                        <Setter Target="PART_Icon.Foreground" Value="{ThemeResource RibbonHeaderDropDownItemForegroundSelectedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="SelectedPointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonHeaderDropDownItemBackgroundSelectedHoveredBrush}"/>
                                        <Setter Target="PART_Icon.Foreground" Value="{ThemeResource RibbonHeaderDropDownItemForegroundSelectedHoveredBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="SelectedPressed">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonHeaderDropDownItemBackgroundSelectedPressedBrush}"/>
                                        <Setter Target="PART_Icon.Foreground" Value="{ThemeResource RibbonHeaderDropDownItemForegroundSelectedPressedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <VisualState.Setters>
                                        <Setter Target="PART_FocusVisual.Opacity" Value="0.9"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Unfocused" />
                                <VisualState x:Name="PointerFocused" />
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <XamlInternal:IconView x:Name="PART_Icon"
                                               UseIconPadding="False"
                                               Margin="{TemplateBinding Padding}"/>
                        <Grid x:Name="PART_FocusVisual" Margin="1" Opacity="0">
                            <Border x:Name="PART_SelectedFocusVisual" CornerRadius="2,2,0,0" IsHitTestVisible="False" BorderThickness="1" BorderBrush="{ThemeResource RibbonHeaderDropDownItemFocusVisualStrokeSelectedBrush}" Opacity="0" Background="{ThemeResource RibbonHeaderDropDownItemFocusVisualBackgroundSelectedBrush}"/>
                            <Border x:Name="PART_UnselectedFocusVisual" CornerRadius="2,2,0,0" IsHitTestVisible="False" BorderThickness="1" BorderBrush="{ThemeResource RibbonHeaderDropDownItemFocusVisualStrokeBrush}" Opacity="0" Background="{ThemeResource RibbonHeaderDropDownItemFocusVisualBackgroundBrush}"/>
                        </Grid>
                        <XamlInternal:NestedMenuFlyoutControl x:Name="PART_Flyout"
                                                       CloseOnTargetClick="{TemplateBinding XamlInternal:MenuFlyoutControl.CloseOnTargetClick}"
                                                       x:DeferLoadStrategy="Lazy"
                                                       Background="{ThemeResource RibbonHeaderDropDownItemFlyoutBackgroundBrush}">
                            <Internal:FlyoutItemsContentHost ItemsSource="{Binding FlyoutContext.FlyoutItems, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                        </XamlInternal:NestedMenuFlyoutControl>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="Internal:RibbonToolbarHeaderDropDownItem">
        <Setter Property="UseSystemFocusVisuals" Value="False"/>
        <Setter Property="Background" Value="{ThemeResource RibbonToolbarHeaderDropDownItemBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{ThemeResource RibbonToolbarHeaderDropDownItemForegroundBrush}"/>
        <Setter Property="BorderBrush" Value="{ThemeResource RibbonToolbarHeaderDropDownItemBorderBrush}"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="Padding" Value="11"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="IconSource" Value="F1 M 0,0 L 6,4 L 12,0 L 12,2 L 6,6 L 0,2 z"/>
        <Setter Property="ClickMode" Value="Press"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Internal:RibbonToolbarHeaderDropDownItem">
                    <Grid x:Name="PART_Background"
                          Background="{TemplateBinding Background}"
                          BorderThickness="{TemplateBinding BorderThickness}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="Disabled">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.Opacity" Value="0.4"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="SelectionStates">
                                <VisualState x:Name="Unselected">
                                    <VisualState.Setters>
                                        <Setter Target="PART_UnselectedFocusVisual.Opacity" Value="1"/>
                                        <Setter Target="PART_SelectedFocusVisual.Opacity" Value="0"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="UnselectedPointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonToolbarHeaderDropDownItemBackgroundHoverBrush}"/>
                                        <Setter Target="PART_Icon.Foreground" Value="{ThemeResource RibbonToolbarHeaderDropDownItemForegroundHoverBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="UnselectedPressed">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonToolbarHeaderDropDownItemBackgroundPressedBrush}"/>
                                        <Setter Target="PART_Icon.Foreground" Value="{ThemeResource RibbonToolbarHeaderDropDownItemForegroundPressedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Selected">
                                    <VisualState.Setters>
                                        <Setter Target="PART_UnselectedFocusVisual.Opacity" Value="0"/>
                                        <Setter Target="PART_SelectedFocusVisual.Opacity" Value="1"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonToolbarHeaderDropDownItemBackgroundSelectedBrush}"/>
                                        <Setter Target="PART_Icon.Foreground" Value="{ThemeResource RibbonToolbarHeaderDropDownItemForegroundSelectedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="SelectedPointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonToolbarHeaderDropDownItemBackgroundSelectedHoveredBrush}"/>
                                        <Setter Target="PART_Icon.Foreground" Value="{ThemeResource RibbonToolbarHeaderDropDownItemForegroundSelectedHoveredBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="SelectedPressed">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonToolbarHeaderDropDownItemBackgroundSelectedPressedBrush}"/>
                                        <Setter Target="PART_Icon.Foreground" Value="{ThemeResource RibbonToolbarHeaderDropDownItemForegroundSelectedPressedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <VisualState.Setters>
                                        <Setter Target="PART_FocusVisual.Opacity" Value="0.9"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Unfocused" />
                                <VisualState x:Name="PointerFocused" />
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <XamlInternal:IconView x:Name="PART_Icon"
                                               UseIconPadding="False"
                                               Margin="{TemplateBinding Padding}"/>
                        <Grid x:Name="PART_FocusVisual" Margin="1" Opacity="0">
                            <Border x:Name="PART_SelectedFocusVisual" CornerRadius="2,2,0,0" IsHitTestVisible="False" BorderThickness="1" BorderBrush="{ThemeResource RibbonToolbarHeaderDropDownItemFocusVisualStrokeSelectedBrush}" Opacity="0" Background="{ThemeResource RibbonToolbarHeaderDropDownItemFocusVisualBackgroundSelectedBrush}"/>
                            <Border x:Name="PART_UnselectedFocusVisual" CornerRadius="2,2,0,0" IsHitTestVisible="False" BorderThickness="1" BorderBrush="{ThemeResource RibbonToolbarHeaderDropDownItemFocusVisualStrokeBrush}" Opacity="0" Background="{ThemeResource RibbonToolbarHeaderDropDownItemFocusVisualBackgroundBrush}"/>
                        </Grid>
                        <XamlInternal:NestedMenuFlyoutControl x:Name="PART_Flyout"
                                                       CloseOnTargetClick="{TemplateBinding XamlInternal:MenuFlyoutControl.CloseOnTargetClick}"
                                                       x:DeferLoadStrategy="Lazy"
                                                       Background="{ThemeResource RibbonToolbarHeaderDropDownItemFlyoutBackgroundBrush}">
                            <Internal:FlyoutItemsContentHost ItemsSource="{Binding FlyoutContext.FlyoutItems, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                        </XamlInternal:NestedMenuFlyoutControl>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="Internal:RibbonGroupDropDownItem">
        <Setter Property="UseSystemFocusVisuals" Value="False"/>
        <Setter Property="Background" Value="{ThemeResource RibbonGroupDropDownItemBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{ThemeResource RibbonGroupDropDownItemForegroundBrush}"/>
        <Setter Property="BorderBrush" Value="{ThemeResource RibbonGroupDropDownItemBorderBrush}"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="Padding" Value="11"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="ClickMode" Value="Press"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Internal:RibbonGroupDropDownItem">
                    <Grid x:Name="PART_Background"
                          ToolTipService.ToolTip="{Binding FlyoutContext.FlyoutCaption, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                          Background="{TemplateBinding Background}"
                          BorderThickness="{TemplateBinding BorderThickness}" 
                          BorderBrush="{TemplateBinding BorderBrush}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="SelectionStates">
                                <VisualState x:Name="Unselected"/>
                                <VisualState x:Name="UnselectedPointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.BorderBrush" Value="{ThemeResource RibbonGroupDropDownItemBorderHoverBrush}"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonGroupDropDownItemBackgroundHoverBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="UnselectedPressed">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.BorderBrush" Value="{ThemeResource RibbonGroupDropDownItemBorderPressedBrush}"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonGroupDropDownItemBackgroundPressedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Selected">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.BorderBrush" Value="{ThemeResource RibbonGroupDropDownItemBorderSelectedBrush}"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonGroupDropDownItemBackgroundSelectedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="SelectedPointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.BorderBrush" Value="{ThemeResource RibbonGroupDropDownItemBorderSelectedHoverBrush}"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonGroupDropDownItemBackgroundSelectedHoverBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="SelectedPressed">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Background.BorderBrush" Value="{ThemeResource RibbonGroupDropDownItemBorderSelectedPressedBrush}"/>
                                        <Setter Target="PART_Background.Background" Value="{ThemeResource RibbonGroupDropDownItemBackgroundSelectedPressedBrush}"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
							<VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <VisualState.Setters>
                                        <Setter Target="PART_FocusVisual.Opacity" Value="0.9"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Unfocused" />
                                <VisualState x:Name="PointerFocused" />
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <XamlInternal:DropDownIconView IsIconVisible="{Binding FlyoutContext.IsGroupCollapsed, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                       Owner="{Binding FlyoutContext.IconProvider, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                       Margin="{TemplateBinding Padding}"/>
						<Rectangle x:Name="PART_FocusVisual" 
                                   IsHitTestVisible="False" 
                                   StrokeThickness="1" 
                                   Opacity="0" 
                                   Stroke="{ThemeResource RibbonGroupDropDownItemFocusVisualStrokeBrush}" 
                                   Fill="{ThemeResource RibbonGroupDropDownItemFocusVisualBackgroundBrush}"
                                   Margin="{Binding BorderThickness, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource ThicknessNegationConverter}}"/>
                        <XamlInternal:NestedMenuFlyoutControl x:Name="PART_Flyout"
                                                       CloseOnTargetClick="{TemplateBinding XamlInternal:MenuFlyoutControl.CloseOnTargetClick}"
                                                       x:DeferLoadStrategy="Lazy"
                                                       HeaderContent="{Binding FlyoutContext.FlyoutCaption, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                       Margin="{Binding BorderThickness, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource ThicknessNegationConverter}}">
                            <Internal:FlyoutItemsContentHost ItemsSource="{Binding FlyoutContext.FlyoutItems, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                             ColumnCount="{Binding FlyoutContext.FlyoutColumnCount, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                                             FlyoutCalculator="{Binding FlyoutContext.FlyoutCalculator, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                        </XamlInternal:NestedMenuFlyoutControl>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    
</ResourceDictionary>

